{
  "name": "Assistant on creating user stories",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "assistant_on_creating_user_stories",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -340,
        160
      ],
      "id": "3291f85f-825b-4178-8440-90e7aef274bd",
      "name": "Webhook",
      "webhookId": "9066e90b-78e9-4efb-b5c1-d5fd3778b1d7"
    },
    {
      "parameters": {
        "model": "llama3.2:latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        20,
        380
      ],
      "id": "cf889c5f-9bca-4fc4-841e-c30b4c6ff317",
      "name": "Ollama Chat Model",
      "credentials": {
        "ollamaApi": {
          "id": "xHuYe0MDGOs9IpBW",
          "name": "Local Ollama service"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Webhook').item.json.body.sessionId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        240,
        380
      ],
      "id": "4db631d9-d2e0-4e15-ab96-0c29ed231791",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        560,
        160
      ],
      "id": "ecf2d8fa-f46d-4653-9acf-8aa58054931e",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "content": "## üëÜ\nThe memory keeps a history of previous messages, allowing for an ongoing conversation with the AI, rather than every interaction starting fresh.\n\n\nThis short term memory stores a customizable length of chat history for the current session.",
        "height": 340,
        "width": 170
      },
      "id": "b08d2bd2-9d70-4b6f-9613-cfbb7e078612",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        220,
        520
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## üëÜ\nThe Ollama Chat Model node allows to use Large Language Models (LLMs) with conversational agents.\n\nThe LLM llama3.2 is used here.\n",
        "height": 340,
        "width": 170
      },
      "id": "95f00a62-bb4f-4991-acc2-ae800232de10",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -20,
        520
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## üëÜ\n The Webhook node is used to create webhooks, which can receive data from apps and services when an event occurs. It's a trigger node, which means it can start an n8n workflow. In this case it allows Open WebUI  to connect to n8n and run a workflow. \n\nTherefore, the workflow is started as soon as a chat message is sent from Open Webui.",
        "height": 540,
        "width": 170
      },
      "id": "39368908-6bbf-4822-a59f-d7d3e208a3dc",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -380,
        320
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## üëÜ\nUse the Respond to Webhook node to control the response to incoming webhooks. This node works with the Webhook node.\n\nIn this case, the generated response from the AI-Agent is sent to Open WebUI via this node.",
        "height": 540,
        "width": 170
      },
      "id": "87f1f641-2459-4eea-8e96-0aed304c9c4c",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        540,
        320
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "# AI-Agents\nAn AI-Agent is an autonomous system that receives data, makes rational decisions, and acts within its environment to achieve specific goals.\n\n### AI agents can be characterised by three components: ###\n\n* Memory Capacities \n* Tools \n* LLM \n\n\n* An LLM acts as the reasoning engine behind the agent and decides what actions to take and in which order. \n\n* Moreover the Agent can use external tools and APIs to perform actions and retrieve information. It can understand the capabilities of different tools and determine which tool to use depending on the task.\n\n\n## Customization of agents\n\n* AI-Agents in n8n can be easily customized using system prompts.\nA system prompt defines the agent‚Äôs role, behavior, and area of expertise‚Äîwhether it's acting as a writer, analyst, advisor, or something else.\n\n* In this case, the AI-Agent has been configured specifically to generate user stories. It analyzes requirements and produces complete user stories in the classic format, including acceptance criteria.\n\n* The agent's purpose can be changed at any time: \nBy simply adjusting the system prompt, it can be reconfigured for virtually any task‚Äîsuch as writing marketing content or drafting support replies.",
        "height": 760,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1120,
        60
      ],
      "typeVersion": 1,
      "id": "0c0917e2-4354-4682-a213-63b8f532a7b4",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## 1. Receiving the user's chat input from Open WebUI",
        "height": 240,
        "width": 340,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -440,
        60
      ],
      "typeVersion": 1,
      "id": "92a8151e-8303-4c44-8e4d-80b469194868",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "",
        "height": 900,
        "width": 2720,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1200,
        0
      ],
      "typeVersion": 1,
      "id": "e7193b51-62f1-41b0-95ad-db28359202b8",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "## 2. Generating Response",
        "height": 240,
        "width": 340,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        60
      ],
      "typeVersion": 1,
      "id": "609d87f1-a2e4-46f5-8268-60f35e2bbfd4",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "content": "## 3. Sending Response to Open WebUI",
        "height": 240,
        "width": 340,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        420,
        60
      ],
      "typeVersion": 1,
      "id": "dfe90e62-34cb-4eb9-b7cf-22a4073b837e",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "content": "# Description of the workflow\n\nThe workflow enables users to enter a request via chat in Open WebUI, from which a complete user story is automatically generated. A specialised AI-Agent in n8n takes over the analysis and formulation - the result is displayed directly in the chat.\n\n\n### 1. Receipt of the user request:\n* A user sends a chat message via Open WebUI with the intention of having a user story created. This request automatically starts the n8n workflow.\n* The message is transmitted to n8n - it contains, for example, an idea, requirement or description from which a user story is to be generated.\n\n\n### 2. Processing by AI agent:\n* The message is forwarded to a specially configured AI Agent Node.\n* This agent is designed to create a complete user story from the perspective of a business analyst.\n* The AI-Agent analyses the input and formulates a structured user story in the classic format (‚ÄòAs a [role], I would like [...] to [...]‚Äô).\n\n### 3. Generation of the user story:\n* The generated story is sent back to OpenWebUI and displayed to the user directly in the chat window as a response",
        "height": 760,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        920,
        60
      ],
      "typeVersion": 1,
      "id": "1fcb4103-29db-4a1d-a85b-06fa2ab7ab53",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Webhook').item.json.body.chatInput }}",
        "options": {
          "systemMessage": "=You take on the role of the Business Analyst in our agile development team. Your primary responsibility is to craft well-structured, clear, and verifiable user stories for upcoming product increments.\nInstructions:\nFormat\nAlways use the standard template:\nAs a <role> I want <feature/function> so that <benefit>\nQuality Criteria (INVEST)\nIndependent (each story stands alone)\nNegotiable (open to discussion)\nValuable (delivers clear value)\nEstimable (can be sized)\nSmall (fits within a single sprint)\nTestable (has clear acceptance criteria)\nAcceptance Criteria\nProvide 3‚Äì5 precise criteria per story, phrased as:\nGiven‚Ä¶, When‚Ä¶, Then‚Ä¶\nAdditional Notes\nDefine any domain-specific terms so developers and testers fully understand them.\nBreak down large themes (epics) into smaller, sprint-sized stories.\nExamples:\nExample 1\nUser Story\nAs a registered user I want to log in with my email and password so that I can access my personal dashboard.\nAcceptance Criteria\nGiven a registered user is on the login page; When they enter a valid email and password; Then they are redirected to their dashboard.\nGiven a user enters an incorrect password; When they click ‚ÄúLog In‚Äù; Then they see the error message ‚ÄúInvalid credentials.‚Äù\nGiven a user has forgotten their password; When they click ‚ÄúForgot Password‚Äù; Then they receive an email with a password-reset link.\nExample 2\nUser Story\nAs a product manager I want to generate a monthly user-engagement report so that I can spot trends early and take action.\nAcceptance Criteria\nGiven the product manager is in the reporting module; When they select ‚ÄúLast Month‚Äù and click ‚ÄúGenerate Report‚Äù; Then a PDF with KPIs (DAU, MAU, session duration) is produced.\nGiven the report is ready; When the product manager clicks ‚ÄúDownload‚Äù; Then the PDF downloads locally.\nGiven there is no data for the selected period; When the report is generated; Then the message ‚ÄúNo data for the selected period‚Äù appears."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        40,
        160
      ],
      "id": "b790f616-3d03-4227-b463-a1dd0dcf7740",
      "name": "Business-Analyst-Agent"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Business-Analyst-Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ollama Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Business-Analyst-Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "Business-Analyst-Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Business-Analyst-Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "09bd5ac3-5173-42b9-af71-4a2d6251a079",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a"
  },
  "id": "5g3wIBt23oVl7EOC",
  "tags": []
}